---
vars:
 app:
  - nginx

  - name: installing nginx
    ansible.builtin.package:
      name: "{{ app }}"
      state: present

  - name: Copy nginx config
    ansible.builtin.template:
      src: nginx.conf.j2
      dest: /etc/nginx/nginx.conf
    notify: restart nginx

handlers:
 - name: restart nginx
   ansible.builtin.systemd_service:
    name: nginx
    state: restarted
    enabled: yes